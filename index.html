<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bucket Jump: Realism Edition ðŸª£</title>
    <style>
        :root { --neon: #00f2ff; --accent: #ff007b; --bg: #0a0a1a; }
        * { box-sizing: border-box; user-select: none; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; display: flex; align-items: center; justify-content: center; height: 100vh; }
        #game-container { position: relative; width: 900px; height: 500px; border-radius: 20px; overflow: hidden; box-shadow: 0 0 100px rgba(0,0,0,0.5); border: 1px solid #333; }
        canvas { display: block; background: #050510; }
        .hud { position: absolute; top: 20px; width: 100%; padding: 0 30px; display: flex; justify-content: space-between; z-index: 10; pointer-events: none; }
        .stat { background: rgba(0,0,0,0.6); padding: 10px 20px; border-radius: 12px; border: 1px solid var(--neon); font-weight: 900; letter-spacing: 1px; }
        .menu { position: absolute; inset: 0; background: rgba(0,0,0,0.85); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100; }
        .btn { background: var(--neon); color: #000; border: none; padding: 15px 40px; font-size: 1.2rem; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .btn:hover { transform: scale(1.1); box-shadow: 0 0 20px var(--neon); }
        .hidden { display: none; }
    </style>
</head>
<body>

<div id="game-container">
    <div class="hud">
        <div class="stat">LVL: <span id="lv">1</span></div>
        <div class="stat">ðŸ’§ <span id="dr">0</span></div>
    </div>

    <div id="m-menu" class="menu">
        <h1 style="font-size: 4rem; margin: 0; text-shadow: 0 0 20px var(--neon);">BUCKET JUMP</h1>
        <p style="margin-bottom: 30px; opacity: 0.7;">WASD or Arrows to Move | Space to Jump</p>
        <button class="btn" onclick="game.start()">LAUNCH</button>
    </div>

    <canvas id="stage"></canvas>
</div>

<script>
const game = {
    state: { drops: 0, level: 1 },
    init() {
        this.cvs = document.getElementById('stage');
        this.ctx = this.cvs.getContext('2d');
        this.cvs.width = 900; this.cvs.height = 500;
        this.keys = {};
        
        window.onkeydown = e => { 
            this.keys[e.code] = true;
            if(['Space','KeyW','ArrowUp'].includes(e.code)) this.jump();
        };
        window.onkeyup = e => this.keys[e.code] = false;
        
        this.p = { x: 100, y: 300, vx: 0, vy: 0, w: 40, h: 45, jc: 0, scaleY: 1, scaleX: 1 };
        this.camX = 0; this.platforms = []; this.items = []; this.running = false;
        this.loop();
    },

    start() {
        document.getElementById('m-menu').classList.add('hidden');
        this.running = true;
        this.lvl(1);
    },

    lvl(n) {
        this.state.level = n;
        this.p.x = 100; this.p.y = 300; this.p.vx = 0; this.p.vy = 0;
        this.platforms = [{x: 0, y: 400, w: 300, h: 100}];
        this.items = [];
        let tx = 450;
        for(let i=0; i<12; i++) {
            let tw = 100 + Math.random()*100;
            let ty = 200 + Math.random()*200;
            this.platforms.push({x: tx, y: ty, w: tw, h: 20});
            if(i % 2 === 0) this.items.push({x: tx + tw/2, y: ty-40, t:'d'});
            tx += tw + 100 + Math.random()*60;
        }
        this.platforms.push({x: tx, y: 350, w: 200, h: 150, goal: true});
        document.getElementById('lv').innerText = n;
    },

    jump() {
        if(!this.running) return;
        if(this.p.jc < 2) {
            this.p.vy = -15;
            this.p.jc++;
            this.p.scaleY = 1.4; this.p.scaleX = 0.7; // Stretch
        }
    },

    update() {
        if(!this.running) return;
        let p = this.p;
        
        if(this.keys['KeyA'] || this.keys['ArrowLeft']) p.vx -= 1;
        if(this.keys['KeyD'] || this.keys['ArrowRight']) p.vx += 1;
        if(this.keys['KeyS'] || this.keys['ArrowDown']) p.vy += 2; // Fast fall
        
        p.vx *= 0.85; p.vy += 0.8;
        p.x += p.vx; p.y += p.vy;

        // Animate squash/stretch back to normal
        p.scaleX += (1 - p.scaleX) * 0.2;
        p.scaleY += (1 - p.scaleY) * 0.2;

        this.platforms.forEach(plt => {
            if(p.x+20 > plt.x && p.x-20 < plt.x+plt.w && p.y+p.h/2 > plt.y && p.y < plt.y+plt.h) {
                if(p.vy > 0) {
                    if(p.vy > 5) { p.scaleY = 0.6; p.scaleX = 1.3; } // Squash on land
                    p.y = plt.y - p.h/2; p.vy = 0; p.jc = 0;
                    if(plt.goal) this.lvl(this.state.level+1);
                }
            }
        });

        this.items.forEach((it, i) => {
            if(!it.done && Math.hypot(p.x-it.x, p.y-it.y) < 40) {
                it.done = true; this.state.drops += 10;
                document.getElementById('dr').innerText = this.state.drops;
            }
        });

        if(p.y > 600) this.lvl(this.state.level);
        this.camX += (p.x - this.camX - 300) * 0.1;
    },

    drawBucket(x, y) {
        let ctx = this.ctx;
        let p = this.p;
        ctx.save();
        ctx.translate(x, y + p.h/2);
        ctx.scale(p.scaleX, p.scaleY);
        
        // Bucket Body (Trapezoid)
        ctx.fillStyle = '#bdc3c7'; // Metal side
        ctx.beginPath();
        ctx.moveTo(-15, -p.h);
        ctx.lineTo(15, -p.h);
        ctx.lineTo(10, 0);
        ctx.lineTo(-10, 0);
        ctx.closePath();
        ctx.fill();

        // Water Inside
        ctx.fillStyle = '#00f2ff';
        ctx.beginPath();
        ctx.moveTo(-13, -p.h + 5);
        ctx.lineTo(13, -p.h + 5);
        ctx.lineTo(9, -2);
        ctx.lineTo(-9, -2);
        ctx.fill();

        // Handle
        ctx.strokeStyle = '#7f8c8d';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.arc(0, -p.h, 15, Math.PI, 0);
        ctx.stroke();

        // Rim
        ctx.fillStyle = '#ecf0f1';
        ctx.fillRect(-16, -p.h, 32, 4);

        ctx.restore();
    },

    draw() {
        this.ctx.clearRect(0,0,900,500);
        
        // Background Grid
        this.ctx.strokeStyle = '#11112b';
        for(let i=0; i<20; i++) {
            this.ctx.beginPath();
            this.ctx.moveTo(0, i*30); this.ctx.lineTo(900, i*30);
            this.ctx.stroke();
        }

        this.ctx.save();
        this.ctx.translate(-this.camX, 0);

        this.platforms.forEach(plt => {
            this.ctx.fillStyle = plt.goal ? var(--accent) : '#1a1a3a';
            this.ctx.shadowBlur = 10; this.ctx.shadowColor = plt.goal ? var(--accent) : '#00f2ff';
            this.ctx.fillRect(plt.x, plt.y, plt.w, plt.h);
            this.ctx.fillStyle = 'rgba(255,255,255,0.05)';
            this.ctx.fillRect(plt.x, plt.y, plt.w, 4);
        });

        this.items.forEach(it => {
            if(it.done) return;
            this.ctx.fillStyle = var(--neon);
            this.ctx.beginPath();
            this.ctx.arc(it.x, it.y + Math.sin(Date.now()/200)*5, 8, 0, 7);
            this.ctx.fill();
        });

        this.drawBucket(this.p.x, this.p.y);

        this.ctx.restore();
    }
};

const var = (name) => getComputedStyle(document.documentElement).getPropertyValue(name);

game.init();
game.loop = function() {
    game.update();
    game.draw();
    requestAnimationFrame(game.loop);
};
</script>
</body>
</html>
